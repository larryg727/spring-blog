<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org"
       xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:include="fragments :: header('Blog Post')" />
<body>
<nav th:replace="fragments :: navBar"></nav>
<div id="postContainer">
<h1 th:text="${post.title}"></h1>
    <div th:if="${post.imageUrl}">
        <img th:src="'/uploads/' + ${post.imageUrl}" alt="" />
    </div>
<h3 th:text="${post.body}"></h3>
    <p>Posted by: <span th:text="${post.user.username}"></span></p>
<p>Email: <span th:text="${post.user.email}"></span></p>

    <div id="comments" sec:authorize="isAuthenticated()">
        <form th:action="@{/comment}" th:method="post" th:object="${comment}">
            <div class="form-group">
                <label for="message">Comment</label>
                <input type="text" name="message" id="message" th:field="*{message}" />
                <p th:if="${#fields.hasErrors('message')}" th:errors="*{message}"></p>
            </div>
            <div class="form-group" >
                <input type="hidden" name="post_id" id="post_id" th:value="${post.id}" />
                <input type="submit" id="submit" value="Post" />
            </div>


        </form>
    </div>
</div>
</body>
</html>